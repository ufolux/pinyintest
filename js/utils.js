// 工具函数和调试功能

// 错误显示函数
function showError(message) {
  if (elements.errorMessage) {
    elements.errorMessage.textContent = message;
    setTimeout(() => {
      elements.errorMessage.textContent = "";
    }, 3000);
  } else {
    console.error(message);
  }
}

// 清除错误消息
function clearError() {
  if (elements.errorMessage) {
    elements.errorMessage.textContent = "";
  }
}

// 检查是否为已知的有效拼音组合（备用验证方法）
function isKnownValidPinyin(pinyin) {
  // 常见的有效拼音组合列表（备用参考）
  const validPinyinList = [
    // 单字母韵母组合
    "ba",
    "pa",
    "ma",
    "fa",
    "da",
    "ta",
    "na",
    "la",
    "ga",
    "ka",
    "ha",
    "za",
    "ca",
    "sa",
    "zha",
    "cha",
    "sha",
    "ra",
    "bo",
    "po",
    "mo",
    "fo",
    "duo",
    "tuo",
    "nuo",
    "luo",
    "guo",
    "kuo",
    "huo",
    "zuo",
    "cuo",
    "suo",
    "zhuo",
    "chuo",
    "shuo",
    "ruo",
    "be",
    "pe",
    "me",
    "de",
    "te",
    "ne",
    "le",
    "ge",
    "ke",
    "he",
    "ze",
    "ce",
    "se",
    "zhe",
    "che",
    "she",
    "re",

    // 双字母韵母组合
    "bai",
    "pai",
    "mai",
    "dai",
    "tai",
    "nai",
    "lai",
    "gai",
    "kai",
    "hai",
    "zai",
    "cai",
    "sai",
    "zhai",
    "chai",
    "shai",
    "bei",
    "pei",
    "mei",
    "fei",
    "dei",
    "nei",
    "lei",
    "gei",
    "kei",
    "hei",
    "zei",
    "shei",
    "bao",
    "pao",
    "mao",
    "dao",
    "tao",
    "nao",
    "lao",
    "gao",
    "kao",
    "hao",
    "zao",
    "cao",
    "sao",
    "zhao",
    "chao",
    "shao",
    "rao",
    "bou",
    "pou",
    "mou",
    "fou",
    "dou",
    "tou",
    "nou",
    "lou",
    "gou",
    "kou",
    "hou",
    "zou",
    "cou",
    "sou",
    "zhou",
    "chou",
    "shou",
    "rou",

    // 鼻音韵母组合
    "ban",
    "pan",
    "man",
    "fan",
    "dan",
    "tan",
    "nan",
    "lan",
    "gan",
    "kan",
    "han",
    "zan",
    "can",
    "san",
    "zhan",
    "chan",
    "shan",
    "ran",
    "ben",
    "pen",
    "men",
    "fen",
    "den",
    "nen",
    "gen",
    "ken",
    "hen",
    "zen",
    "cen",
    "sen",
    "zhen",
    "chen",
    "shen",
    "ren",
    "bang",
    "pang",
    "mang",
    "fang",
    "dang",
    "tang",
    "nang",
    "lang",
    "gang",
    "kang",
    "hang",
    "zang",
    "cang",
    "sang",
    "zhang",
    "chang",
    "shang",
    "rang",
    "beng",
    "peng",
    "meng",
    "feng",
    "deng",
    "teng",
    "neng",
    "leng",
    "geng",
    "keng",
    "heng",
    "zeng",
    "ceng",
    "seng",
    "zheng",
    "cheng",
    "sheng",
    "reng",
    "dong",
    "tong",
    "nong",
    "long",
    "gong",
    "kong",
    "hong",
    "zong",
    "cong",
    "song",
    "zhong",
    "chong",

    // i/u/ü 系列
    "bi",
    "pi",
    "mi",
    "di",
    "ti",
    "ni",
    "li",
    "ji",
    "qi",
    "xi",
    "zhi",
    "chi",
    "shi",
    "ri",
    "zi",
    "ci",
    "si",
    "bu",
    "pu",
    "mu",
    "fu",
    "du",
    "tu",
    "nu",
    "lu",
    "gu",
    "ku",
    "hu",
    "zhu",
    "chu",
    "shu",
    "ru",
    "zu",
    "cu",
    "su",
    "ju",
    "qu",
    "xu",
    "yu",
    "lü",
    "nü",

    // 复合韵母
    "bie",
    "pie",
    "mie",
    "die",
    "tie",
    "nie",
    "lie",
    "jie",
    "qie",
    "xie",
    "yue",
    "diu",
    "niu",
    "liu",
    "jiu",
    "qiu",
    "xiu",
    "you",
    "bin",
    "pin",
    "min",
    "din",
    "tin",
    "nin",
    "lin",
    "jin",
    "qin",
    "xin",
    "yin",
    "bun",
    "pun",
    "mun",
    "dun",
    "tun",
    "nun",
    "lun",
    "gun",
    "kun",
    "hun",
    "zhun",
    "chun",
    "shun",
    "run",
    "zun",
    "cun",
    "sun",
    "yun",
    "jun",
    "qun",
    "xun",
    "bing",
    "ping",
    "ming",
    "ding",
    "ting",
    "ning",
    "ling",
    "jing",
    "qing",
    "xing",
    "ying",
  ];

  return validPinyinList.includes(pinyin);
}

// 运行测试验证
function runValidationTests() {
  console.log("=== 拼音验证测试 ===");

  // 测试有效组合
  console.log("有效组合测试:");
  console.log("ba:", isValidCombination("b", "a")); // 应该是 true
  console.log("ma:", isValidCombination("m", "a")); // 应该是 true
  console.log("zhang:", isValidCombination("zh", "ang")); // 应该是 true
  console.log("zi:", isValidCombination("z", "i")); // 应该是 true

  // 测试无效组合
  console.log("无效组合测试:");
  console.log("j + a:", isValidCombination("j", "a")); // 应该是 false
  console.log("zh + i:", isValidCombination("zh", "i")); // 应该是 false
  console.log("z + ü:", isValidCombination("z", "ü")); // 应该是 false

  // 测试零声母组合
  console.log("零声母组合测试:");
  console.log("a:", isValidCombination("", "a")); // 应该是 true
  console.log("o:", isValidCombination("", "o")); // 应该是 true
  console.log("e:", isValidCombination("", "e")); // 应该是 true

  console.log("验证表中总共有", PINYIN_VALIDATION_TABLE.size, "个有效组合");
  console.log("=== 测试完成 ===");
}
